---

msktutil::chmodpath:     /bin/chmod
msktutil::configpath:    /etc/krb5.conf
msktutil::keytabpath:    /etc/krb5.keytab
msktutil::keytabmode:    '0640'
msktutil::user:          root
msktutil::group:         root
msktutil::packagename:   msktutil
msktutil::usereversedns: false
msktutil::installed:     present
msktutil::ensure:        present
msktutil::makekeytab:    yes
msktutil::cron:          yes
msktutil::msktutilpath:  /sbin/msktutil
msktutil::keytabreplace: 60
msktutil::packages:
  - msktutil
msktutil::extraopts: "--service host/%{facts.hostname} --service host/%{facts.fqdn}"
msktutil::cronfiles:
  cronopts:
    ensure: absent
    path: /etc/defaults/msktutil
  cronstub:
    ensure:  file
    mode:    '0700'
    owner:   "%{msktutil::user}"
    path:    '/etc/cron.daily/msktutil'
    # content: "template('msktutil/cronstub.common')"
    content: |+
      #!/bin/sh
      %{msktutil::msktutilpath} \
        --auto-update \
        --auto-update-interval %{msktutil::keytabreplace} \
        ${dashn} \
        --computer-name %{facts.hostname} \
        --hostname %{facts.fqdn} \
        %{msktutil::extraopts}
